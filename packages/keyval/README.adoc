= KeyVal
:toc: left
:toclevels: 3
:sectnums:
:sectnumlevels: 5
:icons: font
:source-highlighter: highlightjs

ifdef::env-github[]
:tip-caption: üí°
:note-caption: ‚ÑπÔ∏è
:important-caption: ‚ö†Ô∏è
:caution-caption: üî•
:warning-caption: ‚ö†Ô∏è
endif::[]

toc::[]

== Introdu√ß√£o

Este guia ensina como modelar dados e resolver problemas comuns usando KeyVal, um banco de dados chave-valor inspirado no Deno KV.

Se voc√™ vem de bancos relacionais (PostgreSQL, MySQL) ou NoSQL (MongoDB), este guia vai ajudar a traduzir seus conhecimentos para o modelo KeyVal.

=== O que √© KeyVal?

KeyVal √© um banco de dados chave-valor hier√°rquico onde:

* **Chaves** s√£o arrays ordenados: `["users", 123, "profile"]`
* **Valores** s√£o JSON: objetos, arrays, strings, n√∫meros
* **Opera√ß√µes** s√£o at√¥micas e consistentes

[source,typescript]
----
import { Kv } from "@buntime/keyval";

const kv = new Kv("http://localhost:8000/api/keyval");

// Salvar
await kv.set(["users", 1], { name: "Alice", email: "alice@example.com" });

// Buscar
const user = await kv.get(["users", 1]);

// Listar por prefixo
for await (const entry of kv.list(["users"])) {
  console.log(entry.key, entry.value);
}
----

=== Quando usar KeyVal?

[cols="1,1"]
|===
| Bom para: | Evitar para:

| Sess√µes e cache
| Queries SQL complexas (JOINs)

| Configura√ß√µes por usu√°rio
| Relat√≥rios anal√≠ticos

| Filas de trabalho
| Agrega√ß√µes pesadas

| Dados hier√°rquicos
| Dados altamente relacionais

| Real-time (watch)
|

| Full-text search
|
|===

== Fundamentos

Conceitos essenciais para entender o KeyVal.

include::docs/fundamentals/mindset.adoc[leveloffset=+1]

include::docs/fundamentals/keys.adoc[leveloffset=+1]

include::docs/fundamentals/versionstamp.adoc[leveloffset=+1]

== Opera√ß√µes

Como ler, escrever e manipular dados.

include::docs/operations/crud.adoc[leveloffset=+1]

include::docs/operations/listing.adoc[leveloffset=+1]

include::docs/operations/atomic.adoc[leveloffset=+1]

include::docs/operations/transactions.adoc[leveloffset=+1]

== Modelagem

Padr√µes para estruturar seus dados.

include::docs/modeling/relationships.adoc[leveloffset=+1]

include::docs/modeling/indexes.adoc[leveloffset=+1]

include::docs/modeling/patterns.adoc[leveloffset=+1]

== Funcionalidades

Recursos avan√ßados do KeyVal.

include::docs/features/expiration.adoc[leveloffset=+1]

include::docs/features/queues.adoc[leveloffset=+1]

include::docs/features/realtime.adoc[leveloffset=+1]

include::docs/features/fts.adoc[leveloffset=+1]

== Limita√ß√µes

include::docs/limitations.adoc[leveloffset=+1]
