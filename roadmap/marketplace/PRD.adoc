= Buntime Marketplace - PRD Executivo
:toc: left
:toclevels: 3
:sectnums:
:icons: font

ifdef::env-github[]
:tip-caption: üí°
:note-caption: ‚ÑπÔ∏è
:important-caption: ‚ö†Ô∏è
:caution-caption: üî•
:warning-caption: ‚ö†Ô∏è
endif::[]

toc::[]

== Vis√£o Geral

=== Resumo Executivo

Transformar o Buntime em uma plataforma SaaS multi-tenant que permite centralizar aplica√ß√µes e controlar o acesso dos clientes atrav√©s de licen√ßas, eliminando a necessidade de instala√ß√µes individuais e integrando cobran√ßa autom√°tica.

=== Problema Atual

* Cada cliente precisa instalar aplica√ß√µes individualmente em sua infraestrutura
* Atualiza√ß√µes exigem deployment em cada instala√ß√£o
* Cobran√ßa e gest√£o de licen√ßas acontecem manualmente
* Alto custo operacional de manter m√∫ltiplas instala√ß√µes

=== Solu√ß√£o Proposta

Uma plataforma onde:

* **Aplica√ß√µes s√£o implantadas uma √∫nica vez** e servem todos os clientes
* **Acesso controlado via licen√ßas/assinaturas** - cliente paga, acessa imediatamente
* **Cobran√ßa integrada** com Stripe - renova√ß√µes e cancelamentos autom√°ticos
* **Atualiza√ß√µes centralizadas** - um deploy beneficia todos os clientes

== Modelos de Neg√≥cio

=== Freemium

|===
| Camada | Acesso | Monetiza√ß√£o

| **Gratuito**
| Aplica√ß√µes frontend-only (sem APIs)
| Porta de entrada, sem custo

| **Pago**
| Aplica√ß√µes completas (frontend + backend)
| Primeira compra de app converte o usu√°rio
|===

**Objetivo:** Capturar usu√°rios com tier gratuito e converter para planos pagos ao usar apps mais robustos.

=== √Ä la Carte

* Cliente compra **apps individuais** (R$19-49/m√™s por app)
* Pode ter **m√∫ltiplas assinaturas** de apps diferentes
* Ideal para **freelancers e pequenas equipes**

**Exemplo:** Cliente assina "CRM" (R$29/m√™s) + "Projeto Manager" (R$39/m√™s) = R$68/m√™s

=== Bundles

* **Pacotes predefinidos** com conjunto de apps (Basic/Pro/Enterprise)
* **Uma cobran√ßa √∫nica** mensal cobrindo todos os apps do pacote
* **Descontos por volume** - mais barato que comprar apps separados
* Ideal para **empresas e equipes**

**Exemplo:** Plano Pro (R$149/m√™s) inclui 5 apps que individuais custariam R$200/m√™s

=== Modelos de Licenciamento

|===
| Tipo | Descri√ß√£o | Caso de Uso

| **NAMED**
| N√∫mero fixo de usu√°rios nomeados
| Empresas com compliance r√≠gido

| **CONCURRENT**
| Licen√ßas flutuantes por uso simult√¢neo
| Equipes com turnos/compartilhamento

| **ACTIVE_USERS**
| Usu√°rios √∫nicos em janela de 30 dias
| SaaS B2B com pricing baseado em uso

| **UNLIMITED**
| Sem restri√ß√µes (apenas m√©tricas)
| Tier gratuito, ferramentas internas
|===

== Funcionalidades Principais

=== Experi√™ncia do Usu√°rio (App Shell)

A plataforma oferecer√° uma experi√™ncia unificada atrav√©s de um **App Shell estilo sistema operacional** (similar ao puter.com), onde todos os apps s√£o executados dentro de um ambiente integrado.

==== Interface Desktop Virtual

* **Desktop com √≠cones:** Apps instalados aparecem como √≠cones na √°rea de trabalho
* **Dock/Taskbar:** Acesso r√°pido a apps frequentes e abertos
* **Gerenciamento de janelas:** Abrir, fechar, minimizar, maximizar, redimensionar
* **M√∫ltiplos apps simult√¢neos:** Trabalhar com v√°rios apps abertos ao mesmo tempo
* **Sistema de notifica√ß√µes:** Alertas e mensagens do sistema integrados

==== Personaliza√ß√£o

* **Temas:** Modo claro/escuro, temas customizados por tenant
* **Layout:** Posi√ß√£o de dock (inferior, lateral), tamanho de √≠cones
* **Papel de parede:** Branding personalizado por empresa

==== Integra√ß√£o entre Apps

* **Comunica√ß√£o inter-apps (IPC):** Apps podem trocar dados entre si
* **Clipboard compartilhado:** Copiar/colar entre apps
* **Contexto unificado:** Tenant, usu√°rio e permiss√µes compartilhados automaticamente

=== Para Clientes (Tenants)

==== Cat√°logo de Apps
* Descobrir apps dispon√≠veis com descri√ß√£o, pre√ßos e screenshots
* Filtrar por categoria, pre√ßo, funcionalidade
* Ver apps que j√° possui (ativados)

==== Gest√£o de Assinaturas
* Assinar/cancelar apps diretamente no dashboard
* Visualizar apps ativos, usu√°rios consumidos, quotas
* Hist√≥rico de faturas e pagamentos

==== Controle de Acesso
* Atribuir/remover usu√°rios de apps (modelo NAMED)
* Visualizar uso de licen√ßas concorrentes em tempo real
* Gerenciar permiss√µes internas (admin, usu√°rio, viewer)

==== Monitoramento de Uso
* Dashboards com consumo de recursos (requisi√ß√µes, storage, etc.)
* Alertas quando pr√≥ximo de limites de quota
* Hist√≥rico de uso para an√°lise

=== Para Administradores da Plataforma

==== Gest√£o de Tenants
* Criar/editar/suspender clientes
* Visualizar apps ativos por cliente
* Suporte: acessar contexto do cliente para troubleshooting

==== Gest√£o de Apps
* Registrar novos apps no marketplace
* Definir pre√ßos, quotas padr√£o, modelos de licen√ßa
* Ativar/desativar apps para manuten√ß√£o

==== Financeiro
* Dashboard consolidado de receita (MRR, ARR, churn)
* Relat√≥rios de assinaturas ativas/canceladas
* Integra√ß√£o com Stripe para gest√£o de pagamentos

==== Observabilidade
* Logs estruturados por tenant, app, usu√°rio
* M√©tricas de performance (lat√™ncia, throughput, erros)
* Alertas autom√°ticos para anomalias

=== Para Desenvolvedores de Apps

==== Multi-Tenancy Autom√°tico
* Framework injeta automaticamente contexto do tenant
* Isolamento de dados transparente (banco, cache, arquivos)
* API simples para consultar licen√ßas/quotas do tenant

==== Autoriza√ß√£o em Dois N√≠veis
* **N√≠vel 1 (Runtime):** Plataforma valida se tenant tem licen√ßa do app
* **N√≠vel 2 (App):** App consulta permiss√µes granulares do usu√°rio via API

==== Billing Hooks
* Webhooks notificam app sobre mudan√ßas de assinatura
* API para consultar status de pagamento, limites, upgrades

== Cronograma

=== Resumo de Fases

|===
| Fase | Dura√ß√£o | Entreg√°veis | Depend√™ncias

| **Fase 0: Infraestrutura**
| 10 semanas
| Logs, m√©tricas, multi-tenancy, autoriza√ß√£o, billing, rate limiting
| Nenhuma

| **Fase 1: Funda√ß√£o Tenant**
| 4 semanas
| Modelo de dados de tenants, autentica√ß√£o adaptada
| Fase 0

| **Fase 2: Sistema de Autoriza√ß√£o**
| 5 semanas
| Entitlements, licen√ßas, quotas, permiss√µes
| Fase 1

| **Fase 3: Uso e Quotas**
| 3 semanas
| Medi√ß√£o de consumo, enforcement de limites
| Fase 2

| **Fase 4: Integra√ß√£o Billing**
| 3 semanas
| Stripe webhook, cobran√ßa autom√°tica por uso
| Fase 3

| **Fase 4.5: App Shell (OS-like)**
| 10 semanas
| Desktop virtual estilo puter.com: window manager, dock/taskbar, desktop com √≠cones, gerenciamento de m√∫ltiplos apps, temas, IPC
| Nenhuma (inicia em paralelo)

| **Fase 5: App Admin Dashboard**
| 14 semanas
| Gest√£o de tenants, gest√£o de apps, dashboard financeiro, observabilidade
| Fase 4.5

| **Fase 6: App Cat√°logo/Loja**
| 8 semanas
| Cat√°logo visual de apps, flow de compra, gest√£o de assinaturas
| Fase 4.5

| **Fase 7: App Self-Service Tenant**
| 10 semanas
| Dashboard de uso, gest√£o de usu√°rios, faturas, configura√ß√µes de conta
| Fases 4, 4.5, 5, 6

| **Buffer**
| 9 semanas
| Conting√™ncia (12% do tempo total)
| -
|===

=== Detalhamento das Fases

==== Fase 0: Infraestrutura (10 semanas)

**O que ser√° feito:**

* **0a - Multi-tenancy (3 sem):** Identifica√ß√£o de tenant via JWT/API key/subdomain, inje√ß√£o de contexto (x-tenant-id), isolamento de dados por namespace
* **0b - Autoriza√ß√£o Engine (3 sem):** Implementa√ß√£o do PEP (Policy Enforcement Point), integra√ß√£o com PIPs, decis√µes de autoriza√ß√£o (allow/deny)
* **0c - Billing Plugin (4 sem):** Integra√ß√£o com Stripe (webhooks, subscriptions), gerenciamento de pagamentos, renova√ß√µes autom√°ticas
* **0d - Observabilidade (2 sem):** Logs estruturados JSON, m√©tricas Prometheus, audit trails
* **0e - Gateway & Rate Limiting (3 sem):** Limita√ß√£o de requisi√ß√µes por tenant, circuit breakers, prote√ß√£o contra noisy neighbor

**Justificativa do prazo:**

Infraestrutura √© a base cr√≠tica. Multi-tenancy e autoriza√ß√£o precisam estar s√≥lidos antes de qualquer app ser desenvolvido. Integra√ß√£o Stripe requer testes extensivos (webhooks, casos de falha, idempot√™ncia). Algumas sub-fases podem ocorrer em paralelo (0d pode come√ßar junto com 0a).

==== Fase 1: Funda√ß√£o Tenant (4 semanas)

**O que ser√° feito:**

* Modelo de dados de tenants (tabelas, schemas)
* API CRUD para gest√£o de tenants
* Adapta√ß√£o do plugin-authn para suportar multi-tenancy
* Registro de tenant root user

**Justificativa do prazo:**

Fase relativamente simples, mas essencial. Precisa garantir que toda a estrutura de dados est√° correta para evitar refatora√ß√µes futuras. 4 semanas incluem: design de schema, implementa√ß√£o, testes de isolamento, valida√ß√£o de seguran√ßa.

==== Fase 2: Sistema de Autoriza√ß√£o (5 semanas)

**O que ser√° feito:**

* **app-licenses (PIP):** Entitlements, controle de seats/concurrent users, quotas por tenant
* **app-iam (PIP):** Sistema granular de roles e permissions (admin, user, viewer)
* Integra√ß√£o com PDP (Policy Decision Point)
* APIs HTTP para apps consultarem permiss√µes

**Justificativa do prazo:**

Sistema de autoriza√ß√£o √© complexo - precisa lidar com diferentes modelos de licenciamento (NAMED, CONCURRENT, ACTIVE_USERS, UNLIMITED), controle de quotas, e permiss√µes granulares. 5 semanas cobrem: modelagem, implementa√ß√£o, testes de casos de borda, documenta√ß√£o de APIs.

==== Fase 3: Uso e Quotas (3 semanas)

**O que ser√° feito:**

* Medi√ß√£o de consumo de recursos (requisi√ß√µes, storage, compute)
* Enforcement de limites por tenant
* Alertas quando pr√≥ximo de quotas
* Dashboard de m√©tricas de uso

**Justificativa do prazo:**

Relativamente direto ap√≥s Fase 2 estar pronta. 3 semanas para: instrumenta√ß√£o de m√©tricas, implementa√ß√£o de enforcement, testes de limites, integra√ß√£o com observabilidade.

==== Fase 4: Integra√ß√£o Billing (3 semanas)

**O que ser√° feito:**

* Webhooks Stripe processando eventos (subscription.created, payment.succeeded, etc.)
* Cobran√ßa autom√°tica baseada em uso
* Sincroniza√ß√£o estado de assinaturas
* Testes de retry e idempot√™ncia

**Justificativa do prazo:**

Billing √© cr√≠tico mas bem definido. Stripe tem boa documenta√ß√£o. 3 semanas para: implementar webhooks, testes em sandbox Stripe, tratamento de falhas, valida√ß√£o de seguran√ßa.

==== Fase 4.5: App Shell - OS-like (10 semanas)

**O que ser√° feito:**

* **Window Manager (3 sem):** Sistema de janelas (abrir, fechar, minimizar, maximizar, redimensionar, drag), z-index management
* **Desktop & Dock (2 sem):** √Årea de trabalho com √≠cones, taskbar/dock com apps ativos, drag-and-drop
* **Sistema de Temas (1 sem):** Modo claro/escuro, personaliza√ß√£o de cores, branding por tenant
* **IPC (2 sem):** Comunica√ß√£o entre apps, shared clipboard, eventos globais
* **Integra√ß√£o e Testes (2 sem):** Integra√ß√£o com autoriza√ß√£o, testes E2E, performance

**Justificativa do prazo:**

App Shell √© a funda√ß√£o visual mais complexa. Window management √© n√£o-trivial (estado de janelas, eventos de resize, focus management). IPC precisa ser bem arquitetado para seguran√ßa. 10 semanas permitem: prototipagem UI, implementa√ß√£o robusta, testes de usabilidade, performance tuning.

IMPORTANT: **Esta fase inicia ap√≥s Fase 4** (~m√™s 6), quando a infraestrutura j√° est√° s√≥lida. App Shell √© desenvolvido com integra√ß√£o real √†s APIs de autoriza√ß√£o e multi-tenancy. Fica pronto no ~m√™s 9, fornecendo base para integra√ß√£o final com os apps de Produtos Digitais (que foram desenvolvidos em paralelo com mocks).

==== Fase 5: App Admin Dashboard (14 semanas)

**O que ser√° feito:**

* **Gest√£o de Tenants (3 sem):** CRUD completo, suspens√£o, reativa√ß√£o, contexto para troubleshooting
* **Gest√£o de Apps (3 sem):** Registro de apps, defini√ß√£o de pre√ßos e quotas, ativa√ß√£o/desativa√ß√£o
* **Dashboard Financeiro (4 sem):** Gr√°ficos MRR/ARR/Churn, relat√≥rios de assinaturas, integra√ß√£o com Stripe API, exporta√ß√£o de dados
* **Observabilidade (3 sem):** Visualiza√ß√£o de logs estruturados, dashboards de m√©tricas, configura√ß√£o de alertas
* **Testes e Refinamento (1 sem):** Testes E2E, refinamento UX

**Justificativa do prazo:**

App mais complexo do projeto. Dashboard financeiro sozinho requer integra√ß√£o profunda com Stripe, visualiza√ß√µes de dados (charts), filtros complexos. Observabilidade precisa de queries eficientes e UI responsiva. 14 semanas s√£o conservadoras mas realistas para app de produ√ß√£o completo.

==== Fase 6: App Cat√°logo/Loja (8 semanas)

**O que ser√° feito:**

* **Cat√°logo Visual (3 sem):** Listagem de apps, filtros (categoria, pre√ßo), busca, p√°gina de detalhes com screenshots
* **Flow de Compra (3 sem):** Integra√ß√£o Stripe Checkout, confirma√ß√£o de compra, ativa√ß√£o de app
* **Gest√£o de Assinaturas (2 sem):** Upgrade/downgrade de planos, cancelamento, hist√≥rico de transa√ß√µes

**Justificativa do prazo:**

App mais simples que Admin Dashboard, mas requer integra√ß√£o cr√≠tica com Stripe. UX de compra precisa ser impec√°vel. 8 semanas cobrem: UI do cat√°logo, testes de checkout, casos de erro (pagamento falha, etc.), refinamento da experi√™ncia.

==== Fase 7: App Self-Service Tenant (10 semanas)

**O que ser√° feito:**

* **Dashboard de Uso (3 sem):** Gr√°ficos de consumo de recursos, quotas, hist√≥rico, proje√ß√µes
* **Gest√£o de Usu√°rios (3 sem):** CRUD de usu√°rios, atribui√ß√£o de permiss√µes, atribui√ß√£o de apps (modelo NAMED)
* **Faturas (2 sem):** Hist√≥rico de faturas, download de PDFs, gerenciamento de m√©todos de pagamento
* **Configura√ß√µes (2 sem):** Configura√ß√µes de conta, branding, notifica√ß√µes

**Justificativa do prazo:**

App de m√©dia complexidade. Dashboard de uso requer visualiza√ß√µes de dados. Gest√£o de usu√°rios precisa de UX intuitiva para permiss√µes. Faturas integram com Stripe. 10 semanas para app completo e polido.

==== Integra√ß√£o Backend+Frontend (20 semanas)

**O que ser√° feito:**

* **Substitui√ß√£o de Mocks (8 sem):** Trocar mock server por APIs reais, ajustes de contratos, corre√ß√µes de diverg√™ncias
* **Testes de Integra√ß√£o (6 sem):** Testes E2E de todos os fluxos, testes de carga, testes de seguran√ßa
* **Ajustes e Bugs (4 sem):** Corre√ß√£o de bugs encontrados, refinamentos de performance, ajustes de UX
* **Documenta√ß√£o (2 sem):** Documenta√ß√£o de APIs, guias de usu√°rio, runbooks operacionais

**Justificativa do prazo:**

Integra√ß√£o √© sempre imprevis√≠vel. 20 semanas (~5 meses) √© buffer realista para encontrar e corrigir problemas de integra√ß√£o, casos de borda n√£o cobertos por mocks, ajustes de performance. Permite margem para descobertas inesperadas sem comprometer deadline.

=== Prazo Total

**ESTIMATIVA: ~52 semanas (aproximadamente 12 meses)**

WARNING: Este √© um prazo estimado baseado em premissas de complexidade e disponibilidade de recursos. Prazos reais podem variar significativamente.

NOTE: As Fases 4.5, 5, 6 e 7 envolvem desenvolvimento de novos apps (frontend + backend + testes + docs). As fases 0-4 focam em plugins e infraestrutura do runtime.

IMPORTANT: **A Fase 4.5 (App Shell) inicia no Dia 1 em paralelo** com o Backend, reduzindo o prazo total de 18 para 12 meses (33% mais r√°pido). App Shell estar√° pronto no m√™s 3, permitindo desenvolvimento dos apps de gest√£o com base s√≥lida.

TIP: Fases 5 e 6 podem ocorrer parcialmente em paralelo (in√≠cio da Fase 6 ap√≥s 6-8 semanas da Fase 5), potencialmente reduzindo 4-6 semanas do prazo total.

=== Caminho Cr√≠tico

[mermaid]
----
graph LR
    subgraph Engenharia["Engenharia (7 meses)"]
        B0[Fase 0<br/>Infraestrutura<br/>10 sem] --> B1[Fase 1<br/>Funda√ß√£o<br/>4 sem]
        B1 --> B2[Fase 2<br/>Autoriza√ß√£o<br/>5 sem]
        B2 --> B3[Fase 3<br/>Quotas<br/>3 sem]
        B3 --> B4[Fase 4<br/>Billing<br/>3 sem]
        B4 --> F45[Fase 4.5<br/>App Shell<br/>10 sem]
    end

    subgraph ProdutosDigitais["Produtos Digitais (7 meses - com mocks)"]
        F5[Fase 5<br/>Admin<br/>14 sem] --> F6[Fase 6<br/>Cat√°logo<br/>8 sem]
        F6 --> F7[Fase 7<br/>Self-Service<br/>10 sem]
    end

    F45 --> INT[Integra√ß√£o<br/>20 semanas]
    F7 --> INT
    INT --> MVP[MVP Produ√ß√£o<br/>jan/2027]

    style F45 fill:#ff6b6b
    style INT fill:#4ecdc4
    style MVP fill:#95e1d3
----

**Vantagens do Desenvolvimento Paralelo:**

* **App Shell na Engenharia:** Base t√©cnica desenvolvida ap√≥s infraestrutura estar s√≥lida (m√™s 7)
* **Produtos Digitais independentes:** Apps de gest√£o usam mocks desde Dia 1, n√£o esperam backend terminar
* **Ambas equipes trabalham simultaneamente:** M√°xima paraleliza√ß√£o de recursos
* **Engenharia tem 7 meses** para amadurecer infraestrutura + App Shell antes da integra√ß√£o

=== Modelo de Desenvolvimento Paralelo

IMPORTANT: Como o Buntime √© a infraestrutura e os apps rodam sobre ela, √© poss√≠vel **desenvolver apps em paralelo** usando mocks das APIs de infraestrutura enquanto os plugins reais est√£o sendo desenvolvidos.

==== Estrat√©gia de Paraleliza√ß√£o

**Desenvolvimento Simult√¢neo:**

* **Engenharia:** Fases 0-4 (infraestrutura, plugins) + Fase 4.5 (App Shell)
* **Produtos Digitais:** Fases 5-7 (apps de gest√£o) com **APIs mockadas**

**Linha do tempo paralela (estimativa):**

IMPORTANT: **Ambas equipes (Engenharia e Produtos Digitais) iniciam simultaneamente no Dia 1**. Engenharia desenvolve infraestrutura (Fases 0-4) seguida por App Shell (Fase 4.5). Produtos Digitais desenvolve apps de gest√£o (Fases 5-7) usando mocks da infraestrutura desde o in√≠cio.

WARNING: Prazos s√£o estimativas. Podem variar conforme complexidade e descobertas durante o desenvolvimento.

**Benef√≠cios:**

* **Foco da equipe:** Engenharia 100% em infraestrutura + App Shell, Produtos Digitais 100% em UX dos apps
* **Valida√ß√£o antecipada:** Apps de gest√£o test√°veis desde o in√≠cio (com mocks)
* **Riscos reduzidos:** Problemas de integra√ß√£o identificados em janela dedicada de 5 meses

**Requisitos:**

1. **Defini√ß√£o de contratos de API** clara no in√≠cio (Semana 1-2)
2. **Mock server** simulando comportamento dos plugins
3. **Testes de contrato** para garantir que mocks refletem APIs reais
4. **Janela de integra√ß√£o** de ~5 meses no final para ajustes

**Prazo Total ESTIMADO:** ~7 meses de desenvolvimento paralelo + ~5 meses integra√ß√£o = **~12 meses total**

== Viabilidade

=== Riscos e Mitiga√ß√µes

|===
| Risco | Probabilidade | Impacto | Mitiga√ß√£o

| **Quebra de isolamento entre tenants**
| M√©dia
| CR√çTICO
| Testes de seguran√ßa abrangentes, code review rigoroso, row-level security no banco

| **Falhas na integra√ß√£o de pagamento**
| M√©dia
| ALTO
| Sandbox Stripe extensivo, filas de retry, webhooks resilientes, monitoramento 24/7

| **Performance degradada em escala**
| Alta
| M√âDIO
| Load testing em cada fase, design para escalonamento horizontal, cache agressivo

| **Scope creep**
| Alta
| M√âDIO
| MVP estrito por fase, comit√™ de mudan√ßas, backlog separado para "v2"

| **Depend√™ncias externas (Stripe)**
| Baixa
| ALTO
| M√∫ltiplos modos de fallback, retry exponencial, alertas proativos

| **Complexidade de migra√ß√£o de apps existentes**
| Alta
| M√âDIO
| Suporte h√≠brido (apps legados via proxy), migra√ß√£o gradual oportun√≠stica

| **Diverg√™ncia entre mocks e APIs reais**
| M√©dia
| M√âDIO
| Testes de contrato automatizados, defini√ß√£o rigorosa de contratos de API no in√≠cio, sincroniza√ß√£o semanal entre equipes Backend e Frontend
|===

=== Requisitos T√©cnicos

==== Infraestrutura M√≠nima

* **Compute:** 2-4 inst√¢ncias (redund√¢ncia + load balancing)
* **Database:** PostgreSQL ou LibSQL (multi-tenant)
* **Cache:** Redis (opcional, recomendado)
* **Payments:** Conta Stripe ativa
* **Observability:** Prometheus + Grafana (ou similar)

==== Depend√™ncias Externas

* **Stripe:** Processamento de pagamentos, webhooks
* **Banco de Dados:** LibSQL/PostgreSQL/MySQL (isolamento por namespace/schema)
* **DNS/TLS:** Certificados v√°lidos para subdom√≠nios (tenant.buntime.app)

=== Capacidade da Equipe

|===
| Papel | Dedica√ß√£o | Habilidades Requeridas | Justificativa

| **Backend Developer**
| Tempo integral
| TypeScript, Bun, Hono, PostgreSQL/LibSQL, Stripe
| Infraestrutura, plugins, APIs

| **Frontend Developer**
| Tempo integral
| React, TypeScript, Tailwind, TanStack Router, Charts
| 3 novos apps (Admin, Cat√°logo, Self-Service)

| **DevOps Engineer**
| 30% do tempo
| Docker, CI/CD, Prometheus, Grafana, K8s (opcional)
| Infraestrutura, observabilidade, deploys

| **Product Owner**
| 20% do tempo
| UX, requisitos, prioriza√ß√£o, UAT
| Defini√ß√£o de features, valida√ß√£o
|===

**Total:** ~2.5 pessoas em tempo integral (equivalente) ao longo do projeto

NOTE: O projeto requer 1 desenvolvedor frontend em tempo integral devido ao desenvolvimento de 3 novos apps (Admin Dashboard, Cat√°logo, Self-Service).

== M√©tricas de Sucesso

=== T√©cnicas

|===
| M√©trica | Meta | Monitoramento

| **Incidentes de isolamento**
| Zero
| Auditoria mensal, pen-testing trimestral

| **Lat√™ncia de autoriza√ß√£o (p95)**
| <30ms
| Prometheus, alertas em tempo real

| **Uptime**
| 99.9%
| Status page, post-mortem de incidentes

| **Entrega de webhooks de pagamento**
| 99.95%
| Logs de retry, dashboard Stripe
|===

=== Neg√≥cio

|===
| M√©trica | Meta | Frequ√™ncia

| **Taxa de convers√£o freemium**
| >5%
| Mensal

| **Churn rate**
| <5%/m√™s
| Mensal

| **NPS (Net Promoter Score)**
| >50
| Trimestral

| **Overhead operacional**
| <2h/semana por 100 tenants
| Semanal

| **MRR (Monthly Recurring Revenue)**
| Crescimento de 20%/m√™s ap√≥s lan√ßamento
| Mensal

| **CAC (Customer Acquisition Cost)**
| Payback <6 meses
| Trimestral
|===

== Benef√≠cios Esperados

=== Benef√≠cios Quantific√°veis

* **Redu√ß√£o de custos operacionais:** 70% menos tempo gasto em deployments e manuten√ß√£o
* **Time-to-market:** Novos clientes ativos em <5 minutos (vs dias/semanas)
* **Receita recorrente previs√≠vel:** MRR autom√°tico via Stripe
* **Escala linear:** Custo por tenant decresce com volume

=== Benef√≠cios Qualitativos

* **Experi√™ncia do cliente:** Onboarding instant√¢neo, sem fric√ß√£o t√©cnica
* **Interface unificada:** Ambiente OS-like familiar reduz curva de aprendizado
* **Produtividade:** M√∫ltiplos apps abertos simultaneamente, contexto compartilhado
* **Branding:** Personaliza√ß√£o com temas e identidade visual do cliente
* **Agilidade:** Atualiza√ß√µes e corre√ß√µes implantadas uma vez, beneficiam todos
* **Flexibilidade comercial:** M√∫ltiplos modelos de pricing test√°veis rapidamente
* **Insights de uso:** Dados consolidados para product analytics

== Cronograma de Execu√ß√£o (Gantt)

IMPORTANT: **Todos os prazos apresentados s√£o estimativas** baseadas em premissas de complexidade e recursos. Podem variar conforme:

* Mudan√ßas de escopo durante o desenvolvimento
* Complexidade t√©cnica n√£o prevista
* Disponibilidade real da equipe
* Prioriza√ß√£o de features
* Descobertas durante a implementa√ß√£o

TIP: Recomenda-se revis√µes trimestrais do cronograma para ajustes baseados no progresso real.

NOTE: O gr√°fico Gantt abaixo utiliza Mermaid. Visualize este documento no GitHub ou em editores que suportam Mermaid (VS Code, IntelliJ, etc).

=== Cronograma de Desenvolvimento

NOTE: Prazos estimados. Backend e Frontend desenvolvidos em paralelo usando mocks, seguido de integra√ß√£o.

[mermaid]
----
gantt
    title Cronograma de Execu√ß√£o (Estimativa)
    dateFormat YYYY-MM-DD
    axisFormat %b-%y

    section Engenharia
    Fase 0 - Infraestrutura (10 sem)       :b0, 2026-01-13, 70d
    Fase 1 - Funda√ß√£o Tenant (4 sem)       :b1, after b0, 28d
    Fase 2 - Autoriza√ß√£o (5 sem)           :b2, after b1, 35d
    Fase 3 - Uso e Quotas (3 sem)          :b3, after b2, 21d
    Fase 4 - Billing (3 sem)               :b4, after b3, 21d
    Fase 4.5 - App Shell (10 sem)          :f45, after b4, 70d

    section Produtos Digitais (com mocks desde Dia 1)
    Fase 5 - Admin Dashboard (14 sem)      :f5, 2026-01-13, 98d
    Fase 6 - Cat√°logo/Loja (8 sem)         :f6, after f5, 56d
    Fase 7 - Self-Service (10 sem)         :f7, after f6, 70d

    section Integra√ß√£o
    Integra√ß√£o Backend + Frontend (20 sem)  :integ, after f45, 140d
----

**Vantagens da Abordagem:**

* **Ambas equipes iniciam simultaneamente** no Dia 1 - m√°xima paraleliza√ß√£o
* **App Shell desenvolvido ao final da Engenharia** (m√™s 7) - base t√©cnica s√≥lida
* **Produtos Digitais valida UX com mocks** enquanto Engenharia constr√≥i infraestrutura
* **Valida√ß√£o antecipada:** Stakeholders veem apps funcionais desde o in√≠cio (mesmo sem backend real)
* **Integra√ß√£o dedicada:** 5 meses para integra√ß√£o e testes completos ap√≥s ambas trilhas

**Prazo Total ESTIMADO:** ~12 meses (jan/2026 ‚Üí jan/2027)

=== Marcos Importantes

NOTE: Marcos com prazos estimados. Datas reais ser√£o ajustadas conforme progresso do projeto.

|===
| Marco | M√™s (Est.) | Descri√ß√£o

| **M1: Contratos definidos**
| ~0.5
| APIs documentadas (OpenAPI), mock server rodando, App Shell iniciado

| **M2: App Shell pronto**
| ~3
| Desktop virtual completo funcionando com apps de exemplo

| **M3: Infraestrutura b√°sica**
| ~3
| Multi-tenancy, autoriza√ß√£o b√°sica funcionando

| **M4: Plugins completos**
| ~7
| Todos os plugins de engenharia prontos e testados

| **M5: Apps de Produtos Digitais completos**
| ~7
| Todos os apps funcionando com mocks no App Shell

| **M6: Integra√ß√£o conclu√≠da**
| ~12
| Apps integrados com infraestrutura real, testes E2E passando

| **M7: MVP em produ√ß√£o**
| ~12
| Primeira vers√£o implantada e dispon√≠vel para clientes (jan/2027)
|===

NOTE: Todos os marcos acima s√£o estimativas preliminares. Ser√£o refinados durante o projeto.

=== Equipe Necess√°ria

|===
| Equipe | Papel | Dedica√ß√£o | Responsabilidades

.2+| **Engenharia**
| Backend Developer
| Tempo integral (~12 meses)
| Fases 0-4 (infraestrutura, plugins, APIs) + Fase 4.5 (App Shell)

| DevOps Engineer
| 30% do tempo (~12 meses)
| CI/CD, monitoramento, infraestrutura

.2+| **Produtos Digitais**
| Frontend Developer
| Tempo integral (~12 meses)
| Fases 5-7 (apps de gest√£o: Admin, Cat√°logo, Self-Service)

| Product Owner
| 20% do tempo (~12 meses)
| Requisitos, valida√ß√£o, UX/UI dos apps
|===

**Custo de oportunidade:** Estimativa de 2.5 pessoas em tempo integral (equivalente) por ~12 meses n√£o dispon√≠veis para outros projetos.

IMPORTANT: **Duas equipes trabalhando 100% em paralelo** desde o Dia 1:
- **Engenharia:** Infraestrutura + App Shell
- **Produtos Digitais:** Apps de gest√£o com mocks

== Pr√≥ximos Passos

=== Decis√µes Necess√°rias

1. **Aloca√ß√£o de equipe interna** (estimativa: 2.5 pessoas em tempo integral por ~12 meses - custo de oportunidade)
2. **Aprova√ß√£o de or√ßamento** (estimativa: R$15-25k infraestrutura + R$25k/m√™s opera√ß√£o p√≥s-lan√ßamento)
3. **Defini√ß√£o de pricing** (valores por app, bundles, margens)
4. **Escolha de banco de dados** (LibSQL vs PostgreSQL vs MySQL)
5. **Estrat√©gia de go-to-market** (quais apps oferecer primeiro)
6. **MVP vs Full Feature Set** (vers√£o reduzida ou completa)
7. **Modelo de desenvolvimento:** Sequencial vs Paralelo (apps com mocks da infraestrutura)

=== Kick-off

**Semana 1-2: Setup e Defini√ß√£o de Contratos**

* Setup de infraestrutura dev (repos, CI/CD, ambientes)
* **Defini√ß√£o de contratos de API** (cr√≠tico para desenvolvimento paralelo):
  - Schemas OpenAPI/JSON Schema para todas as APIs de plugins
  - Estrutura de dados (tenant, user, entitlements, quotas, billing)
  - Autentica√ß√£o e autoriza√ß√£o (headers, tokens, contexto)
* Alinhamento das duas equipes (Engenharia e Produtos Digitais) e responsabilidades
* Configura√ß√£o de mock server para Produtos Digitais

**Semana 3-4: Sprint 0 - In√≠cio Paralelo**

* **Engenharia:** In√≠cio de Fase 0a (Multi-tenancy) + Fase 4.5 (App Shell)
* **Produtos Digitais:** Prepara√ß√£o e familiariza√ß√£o com mocks (inicia Fase 5 ap√≥s App Shell)
* Definir KPIs e configurar monitoramento
* Baseline de performance
* Primeiro checkpoint de sincroniza√ß√£o entre equipes

IMPORTANT: Ambas as equipes (Engenharia e Produtos Digitais) iniciam simultaneamente na Semana 3, ap√≥s contratos de API estarem definidos. Isso garante m√°xima paraleliza√ß√£o e reduz prazo total para 12 meses.

== Ap√™ndice

=== Gloss√°rio

|===
| Termo | Defini√ß√£o

| **Tenant**
| Cliente da plataforma (empresa ou usu√°rio final)

| **Entitlement**
| Permiss√£o para acessar um app espec√≠fico (via licen√ßa/assinatura)

| **MRR**
| Monthly Recurring Revenue - receita recorrente mensal

| **Churn**
| Taxa de cancelamento de clientes

| **Multi-tenancy**
| Arquitetura onde m√∫ltiplos clientes compartilham mesma inst√¢ncia de software com dados isolados

| **Rate Limiting**
| Limita√ß√£o de requisi√ß√µes por tenant para evitar abuso de recursos

| **App Shell**
| Camada de interface que envolve todos os apps, provendo funcionalidades comuns (window manager, dock, temas, autentica√ß√£o). Similar a um sistema operacional no navegador

| **IPC (Inter-Process Communication)**
| Mecanismo que permite apps se comunicarem entre si dentro do App Shell, compartilhando dados e contexto

| **Mock Server**
| Servidor de desenvolvimento que simula comportamento de APIs reais, permitindo desenvolvimento frontend independente do backend

| **Testes de Contrato**
| Valida√ß√£o automatizada que garante que mocks e implementa√ß√µes reais seguem o mesmo contrato de API (schema, comportamento)
|===

=== Refer√™ncias

* link:./README.adoc[Documenta√ß√£o t√©cnica completa]
* link:./docs/roadmap/phases.adoc[Detalhamento de fases]
* link:./docs/nfr/requirements.adoc[Requisitos n√£o-funcionais]
* link:./docs/concepts/overview.adoc[Vis√£o conceitual da arquitetura]
