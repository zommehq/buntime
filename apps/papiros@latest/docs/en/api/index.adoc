= Overview
:order: 3

This section documents the REST API endpoints available in Leaf.

== API Architecture

The Leaf API provides endpoints for accessing documentation content stored locally in AsciiDoc format. The API supports multi-language content with automatic fallback mechanisms.

[mermaid]
----
flowchart TD
    Client[Client Application]
    API[Leaf API Server]
    FS[File System]
    Cache[In-Memory Cache]

    Client -->|HTTP Request| API
    API -->|Check Cache| Cache
    Cache -->|Cache Miss| FS
    FS -->|Read .adoc files| API
    API -->|Parse & Convert| API
    API -->|Store Result| Cache
    API -->|JSON Response| Client

    style API fill:#4A90E2
    style Cache fill:#F5A623
    style FS fill:#7ED321
----

== Request Flow

[mermaid]
----
sequenceDiagram
    participant C as Client
    participant A as API
    participant L as Language Resolver
    participant P as Parser
    participant F as File System

    C->>A: GET /api/projects/:project/docs/:slug?lang=pt
    A->>L: Resolve Language
    L->>F: Check pt folder exists
    alt Language exists
        L-->>A: Use pt
    else Fallback
        L->>F: Check en folder
        L-->>A: Use en (fallback)
    end
    A->>F: Build hierarchical tree
    F-->>A: Tree structure
    A->>F: Resolve slug to file path
    F-->>A: File path
    A->>P: Parse AsciiDoc
    P-->>A: HTML + Metadata
    A-->>C: JSON Response
----

== In This Section

* link:projects.adoc[Projects] - Endpoints for listing and querying projects
* link:files.adoc[Files] - Endpoints for fetching specific files
* link:cache.adoc[Cache] - Cache management endpoints

== Key Features

* **Multi-language Support**: Automatic language fallback (requested → English → first available)
* **Slug-based Routing**: SEO-friendly URLs mapped to file paths
* **Hierarchical Tree**: Ordered navigation structure based on `:order:` attributes
* **Timeline Support**: Special endpoint for release notes with chronological ordering
* **Security**: Path traversal protection and content directory validation
