== Initial Configuration
:order: 2

=== Configuration Architecture

[mermaid]
----
graph TB
    subgraph "Environment Variables"
        E1[GITLAB_URL]
        E2[GITLAB_TOKEN]
        E3[BUNTIME_URL]
    end

    subgraph "Application Layer"
        A[Leaf App]
        A --> S[Server Routes]
    end

    subgraph "Content Layer"
        C[content/ directory]
        C --> P1[Project 1]
        C --> P2[Project 2]
        C --> P3[Project N]

        P1 --> L1[en/]
        P1 --> L2[pt/]
        P1 --> L3[es/]
    end

    E1 --> A
    E2 --> A
    E3 --> A
    S --> C

    style A fill:#e1f5ff
    style C fill:#fff3cd
----

=== Environment Variables

[cols="2,1,3,2"]
|===
| Variable | Required | Description | Example

| `GITLAB_URL`
| No
| GitLab base URL
| `https://gitlab.cloud4biz.com`

| `GITLAB_TOKEN`
| Yes*
| Access token with read_repository permission
| `glpat-xxxxxxxxxxxx`

| `BUNTIME_URL`
| No
| Buntime base URL (for internal calls)
| `http://localhost:8000`
|===

NOTE: The token is required for private repositories. For public repositories, it can be omitted.

=== Create Token in GitLab

[mermaid]
----
sequenceDiagram
    actor User
    participant GitLab
    participant Leaf

    User->>GitLab: Navigate to Settings > Access Tokens
    User->>GitLab: Create token (read_repository)
    GitLab-->>User: Generate token (glpat-xxx)
    User->>User: Copy token
    User->>Leaf: Set GITLAB_TOKEN env var
    Leaf->>GitLab: API request with token
    GitLab-->>Leaf: Repository content

    Note over User,Leaf: Token required for private repos
----

.Steps to create token:
1. Go to GitLab > Settings > Access Tokens
2. Create a token with:
   - Name: `docs-app`
   - Scopes: `read_repository`
   - Expiration: according to security policy

3. Copy the generated token

=== Configure Projects

Projects are configured in the `server/api.ts` file:

[source,typescript]
----
const PROJECTS: Record<string, string> = {
  "front-manager": "hyper/front-manager",
  "lowcode-studio": "hyper/lowcode-studio",
  "gestao-pessoas": "hyper/gestao-pessoas",
  // Add more projects here
};
----

Each entry maps a friendly name to the project path in GitLab.
