= Visão Geral
:order: 3

Esta seção documenta os endpoints da API REST disponíveis no Leaf.

== Arquitetura da API

A API do Leaf fornece endpoints para acessar conteúdo de documentação armazenado localmente em formato AsciiDoc. A API suporta conteúdo multi-idioma com mecanismos automáticos de fallback.

[mermaid]
----
flowchart TD
    Client[Client Application]
    API[Leaf API Server]
    FS[File System]
    Cache[In-Memory Cache]

    Client -->|HTTP Request| API
    API -->|Check Cache| Cache
    Cache -->|Cache Miss| FS
    FS -->|Read .adoc files| API
    API -->|Parse & Convert| API
    API -->|Store Result| Cache
    API -->|JSON Response| Client

    style API fill:#4A90E2
    style Cache fill:#F5A623
    style FS fill:#7ED321
----

== Fluxo de Requisição

[mermaid]
----
sequenceDiagram
    participant C as Client
    participant A as API
    participant L as Language Resolver
    participant P as Parser
    participant F as File System

    C->>A: GET /api/projects/:project/docs/:slug?lang=pt
    A->>L: Resolve Language
    L->>F: Check pt folder exists
    alt Language exists
        L-->>A: Use pt
    else Fallback
        L->>F: Check en folder
        L-->>A: Use en (fallback)
    end
    A->>F: Build hierarchical tree
    F-->>A: Tree structure
    A->>F: Resolve slug to file path
    F-->>A: File path
    A->>P: Parse AsciiDoc
    P-->>A: HTML + Metadata
    A-->>C: JSON Response
----

== Nesta Seção

* link:projects.adoc[Projetos] - Endpoints de listagem e consulta de projetos
* link:files.adoc[Arquivos] - Endpoints para buscar arquivos específicos
* link:cache.adoc[Cache] - Endpoints de gerenciamento de cache

== Recursos Principais

* **Suporte Multi-idioma**: Fallback automático de idioma (solicitado → Inglês → primeiro disponível)
* **Roteamento baseado em Slug**: URLs amigáveis para SEO mapeadas para caminhos de arquivos
* **Árvore Hierárquica**: Estrutura de navegação ordenada baseada em atributos `:order:`
* **Suporte a Timeline**: Endpoint especial para notas de versão com ordenação cronológica
* **Segurança**: Proteção contra travessia de caminho e validação de diretório de conteúdo
