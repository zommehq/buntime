== Configuração de Projetos
:order: 2

=== Estrutura de Projetos

[mermaid]
----
graph TD
    subgraph "Estrutura do Diretório Content"
        ROOT[content/]
        ROOT --> P1[nome-projeto/]
        ROOT --> P2[outro-projeto/]

        P1 --> IDX1[index.adoc]
        P1 --> L1[en/]
        P1 --> L2[pt/]
        P1 --> L3[es/]

        L1 --> D1[getting-started/]
        L1 --> D2[configuration/]
        L1 --> D3[releases/]

        D1 --> F1[installation.adoc]
        D1 --> F2[configuration.adoc]
    end

    subgraph "Resolução da API"
        API[/api/projects/:project]
        API --> SCAN[Escanear content/]
        SCAN --> CONFIG[Carregar config do projeto]
        CONFIG --> TREE[Construir árvore de docs]
    end

    ROOT --> API

    style ROOT fill:#fff3cd
    style API fill:#e1f5ff
----

=== Mapa de Projetos

Os projetos são configurados estaticamente no arquivo `server/api.ts`:

[source,typescript]
----
const PROJECTS: Record<string, string> = {
  // Chave: nome amigável (usado na URL)
  // Valor: path do projeto no GitLab
  
  "front-manager": "hyper/front-manager",
  "lowcode-studio": "hyper/lowcode-studio",
  "gestao-pessoas": "hyper/gestao-pessoas",
  "gestor-licencas": "hyper/gestor-licencas-api",
  "hyper-kanban": "hyper/hyper-kanban-front-react",
  "edge-runtime": "hyper/edge-runtime",
  "hyper-admin": "hyper/hyper-admin-front",
};
----

=== Adicionar Novo Projeto

[mermaid]
----
flowchart TD
    START[Adicionar novo projeto] --> PREP[Preparar projeto]
    PREP --> CHECK1{Tem pasta docs/?}
    CHECK1 -->|Não| CREATE[Criar estrutura docs]
    CHECK1 -->|Sim| CHECK2{Tem index.adoc?}
    CREATE --> CHECK2
    CHECK2 -->|Não| CREATEIDX[Criar index.adoc com metadados]
    CHECK2 -->|Sim| LANG{Multi-idioma?}
    CREATEIDX --> LANG
    LANG -->|Sim| LANGDIR[Criar pastas en/, pt/, es/]
    LANG -->|Não| SINGLE[Estrutura de idioma único]
    LANGDIR --> CONTENT[Adicionar arquivos de conteúdo]
    SINGLE --> CONTENT
    CONTENT --> MKDIR[Criar pasta em content/]
    MKDIR --> COPY[Copiar docs para content/nome-projeto/idioma/]
    COPY --> TEST[Testar localmente]
    TEST --> DEPLOY[Deploy]

    style START fill:#e1f5ff
    style DEPLOY fill:#d4edda
----

.Passos para adicionar um projeto:
1. Localize o path do projeto no GitLab (ex: `grupo/subgrupo/projeto`)
2. Adicione uma entrada no mapa `PROJECTS`
3. Rebuild o app

[source,typescript]
----
const PROJECTS: Record<string, string> = {
  // ... projetos existentes
  "meu-projeto": "hyper/meu-projeto",
};
----

=== Requisitos do Projeto

Para funcionar corretamente, o projeto deve ter:

* `README.adoc` na raiz (para Visão Geral)
* Pasta `docs/` com arquivos `.adoc`
* Release notes em um dos caminhos padrão:
  - `docs/pt-br/release-notes.adoc`
  - `docs/en-us/release-notes.adoc`
  - `docs/release-notes.adoc`
  - `CHANGELOG.adoc`

=== Configuração Dinâmica (Futuro)

Planejado para versões futuras:

* API para adicionar/remover projetos
* Configuração via arquivo YAML/JSON
* Interface de administração
