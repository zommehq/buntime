= API HTTP
:toc: left
:toclevels: 3
:sectnums:
:sectnumlevels: 5
:icons: font
:source-highlighter: highlightjs

O plugin expõe alguns endpoints REST para gerenciamento e monitoramento.

== Base URL

Por padrão, os endpoints estão em `/database/api`.

O caminho pode ser customizado via configuração no `manifest.jsonc` do plugin:

[source,jsonc]
----
// plugins/plugin-database/manifest.jsonc
{
  "enabled": true,
  "base": "db"
}
----

Neste caso, os endpoints ficam em `/db/api/*`.

== Endpoints

=== Listar Adapters

Retorna a lista de tipos de adapters configurados e qual é o adapter padrão.

`GET /database/api/adapters`

**Response:**

[source,json]
----
{
  "adapters": ["libsql", "sqlite"],
  "default": "libsql"
}
----

=== Health Check

Verifica a saúde da conexão com o banco de dados.

`GET /database/api/health`

**Response:**

[source,json]
----
{
  "status": "healthy"
}
----

=== Tenants

Gerenciamento de tenants (namespaces).

==== Listar Tenants

`GET /database/api/tenants`

**Response:**

[source,json]
----
{
  "tenants": ["default", "tenant-1", "tenant-2"]
}
----

==== Criar Tenant

Cria um novo tenant (namespace).

`POST /database/api/tenants`

**Body:**

[source,json]
----
{
  "id": "tenant-new"
}
----

**Response:**

[source,json]
----
{
  "ok": true,
  "id": "tenant-new"
}
----

==== Deletar Tenant

Remove um tenant existente.

`DELETE /database/api/tenants/:id`

**Response:**

[source,json]
----
{
  "ok": true
}
----
