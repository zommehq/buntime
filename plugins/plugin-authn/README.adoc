= AuthN Plugin
:toc: left
:toclevels: 3
:sectnums:
:sectnumlevels: 5
:icons: font
:source-highlighter: highlightjs

ifdef::env-github[]
:tip-caption: üí°
:note-caption: ‚ÑπÔ∏è
:important-caption: ‚ö†Ô∏è
:caution-caption: üî•
:warning-caption: ‚ö†Ô∏è
endif::[]

image:https://img.shields.io/badge/Bun-1.x-blue[Bun]
image:https://img.shields.io/badge/better--auth-1.x-green[better-auth]
image:https://img.shields.io/badge/TypeScript-5.0+-blue[TypeScript]

toc::[]

== Vis√£o Geral

**plugin-authn** √© o plugin Buntime para autentica√ß√£o de usu√°rios usando better-auth com suporte a m√∫ltiplos provedores.

=== Funcionalidades

* M√∫ltiplos provedores de autentica√ß√£o (Email/Password, Keycloak, Auth0, Okta, OIDC gen√©rico)
* Gerenciamento autom√°tico de sess√µes com cookies
* P√°gina de login din√¢mica com sele√ß√£o de provedor
* Intercepta√ß√£o de requests para rotas protegidas
* Inje√ß√£o de header `X-Identity` com dados do usu√°rio autenticado
* SCIM 2.0 para provisionamento de usu√°rios e grupos
* Suporte a vari√°veis de ambiente na configura√ß√£o

=== Provedores Suportados

[cols="1,3"]
|===
| Provedor | Descri√ß√£o

| `email-password`
| Autentica√ß√£o local com email e senha

| `keycloak`
| Keycloak via OAuth2/OIDC

| `auth0`
| Auth0 via OAuth2/OIDC

| `okta`
| Okta via OAuth2/OIDC

| `generic-oidc`
| Qualquer provedor OIDC compat√≠vel
|===

=== Depend√™ncias

Este plugin requer `@buntime/plugin-database` para armazenamento de sess√µes e usu√°rios.

[source,jsonc]
----
{
  "plugins": [
    ["@buntime/plugin-database", {
      "adapters": [{ "type": "libsql", "default": true }]
    }],
    ["@buntime/plugin-authn", { ... }]
  ]
}
----

=== Depend√™ncias Opcionais

[cols="1,3"]
|===
| Plugin | Descri√ß√£o

| `@buntime/plugin-proxy`
| Habilita recursos avan√ßados de proxy para fluxos OAuth.
|===

== Setup

include::docs/overview/setup.adoc[leveloffset=+1]

include::docs/overview/configuration.adoc[leveloffset=+1]

include::docs/overview/client-integration.adoc[leveloffset=+1]

== API

include::docs/api/endpoints.adoc[leveloffset=+1]

== SCIM 2.0

include::docs/api/scim.adoc[leveloffset=+1]
